{% load static %}
<div class="row row-cols-1 row-cols-md-2 g-4">
    {% for p in products %}
        <div class="col">
            <div class="card h-100">
                <div class="row g-0">
                    <div class="col-md-8 p-3">
                        <h5 class="card-title">{{ p.name }}</h5>
                        <p class="card-text">{{ p.description }}</p>
                        <p class="card-text"><strong>Price:</strong> Â¥{{ p.price }}</p>
                        <p class="card-text"><strong>Stock:</strong> {{ p.stock }}</p>

                        {% if user.is_authenticated %}
                            <button class="btn btn-success add-to-cart-btn mt-2" data-id="{{ p.id }}">
                                Add to Cart
                            </button>
                        {% else %}
                            <p><a href="{% url 'login' %}">Login to add to cart</a></p>
                        {% endif %}
                    </div>

                    <div class="col-md-4 d-flex align-items-center justify-content-center p-3">
                        <img src="{% static 'shop/product_images/'|add:p.image_name %}" 
                             class="img-fluid rounded" 
                             alt="{{ p.name }}">
                    </div>
                </div>
            </div>
        </div>
    {% empty %}
        <p>No products available.</p>
    {% endfor %}
</div>
